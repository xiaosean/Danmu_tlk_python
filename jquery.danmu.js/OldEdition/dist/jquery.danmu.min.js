!function(a){a.jQueryPlugin=function(b){a.fn[b]=function(c){var d=Array.prototype.slice.call(arguments,1);return this.length?this.each(function(){var e=a.data(this,b)||a.data(this,b,new cyntax.plugins[b](this,c)._init());"string"==typeof c&&(c=c.replace(/^_/,""),e[c]&&e[c].apply(e,d))}):void 0}}}(jQuery);var cyntax={plugins:{}};!function(){function a(){return(new Date).getTime()}var b=jQuery,c="jQuery.pause",d=1,e=b.fn.animate,f={};b.fn.animate=function(g,h,i,j){var k=b.speed(h,i,j);return k.complete=k.old,this.each(function(){this[c]||(this[c]=d++);var h=b.extend({},k);e.apply(b(this),[g,b.extend({},h)]),f[this[c]]={run:!0,prop:g,opt:h,start:a(),done:0}})},b.fn.pause=function(){return this.each(function(){this[c]||(this[c]=d++);var e=f[this[c]];e&&e.run&&(e.done+=a()-e.start,e.done>e.opt.duration?delete f[this[c]]:(b(this).stop(),e.run=!1))})},b.fn.resume=function(){return this.each(function(){this[c]||(this[c]=d++);var g=f[this[c]];g&&!g.run&&(g.opt.duration-=g.done,g.done=0,g.run=!0,g.start=a(),e.apply(b(this),[g.prop,b.extend({},g.opt)]))})}}(),function(a){cyntax.plugins.timer=function(b,c){this.$this=a(b),this.options=a.extend({},this.defaults,c),this.timer_info={id:null,index:null,state:0}},cyntax.plugins.timer.prototype={defaults:{delay:1e3,repeat:!1,autostart:!0,callback:null,url:"",post:""},_init:function(){return this.options.autostart&&(this.timer_info.state=1,this.timer_info.id=setTimeout(a.proxy(this._timer_fn,this),this.options.delay)),this},_timer_fn:function(){"function"==typeof this.options.callback?a.proxy(this.options.callback,this.$this).call(this,++this.timer_info.index):"string"==typeof this.options.url&&(ajax_options={url:this.options.url,context:this,type:"string"==typeof this.options.post&&""!=typeof this.options.post==""?"POST":"GET",success:function(a){this.$this.html(a)}},"string"==typeof this.options.post&&""!=typeof this.options.post&&(ajax_options.data=this.options.post),a.ajax(ajax_options)),this.options.repeat&&1==this.timer_info.state&&("boolean"==typeof this.options.repeat||parseInt(this.options.repeat)>this.timer_info.index)?this.timer_info.id=setTimeout(a.proxy(this._timer_fn,this),this.options.delay):this.timer_id=null},start:function(){0==this.timer_info.state&&(this.timer_info.index=0,this.timer_info.state=1,this.timer_id=setTimeout(a.proxy(this._timer_fn,this),this.options.delay))},stop:function(){1==this.timer_info.state&&this.timer_info.id&&(clearTimeout(this.timer_info.id),this.timer_id=null),this.timer_info.state=0},pause:function(){1==this.timer_info.state&&this.timer_info.id&&clearTimeout(this.timer_info.id),this.timer_info.state=0},resume:function(){this.timer_info.state=1,this.timer_id=setTimeout(a.proxy(this._timer_fn,this),this.options.delay)}},a.jQueryPlugin("timer")}(jQuery),function(a){function b(b,d){return this.each(function(){var e=a(this),f=a.extend({},c.DEFAULTS,"object"==typeof b&&b),g=e.data("danmu"),h="string"==typeof b?b:0/0;g||e.data("danmu",g=new c(this,f)),h&&g[h](d)})}var c=function(b,c){this.$element=a(b),this.options=c,a(b).data("nowtime",0),a(b).data("danmu_array",c.danmuss),a(b).data("opacity",c.opacity),a(b).data("paused",1),a(b).data("topspace",0),a(b).data("bottomspace",0),this.$element.css({position:"absolute",left:this.options.left,top:this.options.top,width:this.options.width,height:this.options.height,"z-index":this.options.zindex,color:c.default_font_color,overflow:"hidden"});var d=this.$element.height(),e=parseInt(d/c.font_size_big),f=new Array;a("<div class='timer71452'></div>").appendTo(this.$element),this.$timer=a(".timer71452"),this.$timer.timer({delay:100,repeat:c.sumtime,autostart:!1,callback:function(){if(d=a(b).height(),a(b).data("danmu_array")[a(b).data("nowtime")])for(var g=a(b).data("danmu_array")[a(b).data("nowtime")],h=0;h<g.length;h++){var i="<div class='flying flying2' id='linshi'></div>";if(a(b).append(i),a("#linshi").text(g[h].text),a("#linshi").css({color:g[h].color,"text-shadow":" 0px 0px 2px #000000","-moz-opacity":a(b).data("opacity"),opacity:a(b).data("opacity"),"white-space":"nowrap","font-weight":"bold","font-family":"SimHei","font-size":c.font_size_big}),g[h].color<"#777777"&&a("#linshi").css({"text-shadow":" 0px 0px 2px #FFFFFF"}),g[h].hasOwnProperty("isnew")&&a("#linshi").css({border:"2px solid "+g[h].color}),0==g[h].size&&a("#linshi").css("font-size",c.font_size_small),0==g[h].position){for(var j=parseInt(e*Math.random());f.indexOf(j)>=0;)var j=parseInt(e*Math.random());f.push(j),f.length==e&&(f=new Array,e=parseInt(d/c.font_size_big));var k=j*c.font_size_big;a("#linshi").css({position:"absolute",top:k,left:c.width});var l="fly"+parseInt(d*Math.random()).toString();a("#linshi").attr("id",l),a("#"+l).animate({left:3*-a(this).width()},c.speed,function(){a(this).remove()})}else if(1==g[h].position){var m="top"+parseInt(1e4*Math.random()).toString();a("#linshi").attr("id",m),a("#"+m).css({width:c.width,"text-align":"center",position:"absolute",top:5+a(b).data("topspace")}),a(b).data("topspace",a(b).data("topspace")+c.font_size_big),a("#"+m).fadeTo(c.top_botton_danmu_time,a(b).data("opacity"),function(){a(this).remove(),a(b).data("topspace",a(b).data("topspace")-c.font_size_big)})}else if(2==g[h].position){var n="top"+parseInt(1e4*Math.random()).toString();a("#linshi").attr("id",n),a("#"+n).css({width:c.width,"text-align":"center",position:"absolute",bottom:0+a(b).data("bottomspace")}),a(b).data("bottomspace",a(b).data("bottomspace")+c.font_size_big),a("#"+n).fadeTo(c.top_botton_danmu_time,a(b).data("opacity"),function(){a(this).remove(),a(b).data("bottomspace",a(b).data("bottomspace")-c.font_size_big)})}}a(b).data("nowtime",a(b).data("nowtime")+1)}})};c.DEFAULTS={left:0,top:0,height:360,width:640,zindex:100,speed:2e4,sumtime:65535,danmuss:{},default_font_color:"#FFFFFF",font_size_small:16,font_size_big:24,opacity:"0.9",top_botton_danmu_time:6e3},c.prototype.danmu_start=function(){this.$timer.timer("start"),this.$element.data("paused",0)},c.prototype.danmu_stop=function(){this.$timer.timer("stop"),a(".flying").remove(),nowtime=0,this.$element.data("paused",1),this.$element.data("nowtime",0)},c.prototype.danmu_pause=function(){this.$timer.timer("pause"),a(".flying").pause(),this.$element.data("paused",1)},c.prototype.danmu_resume=function(){this.$timer.timer("resume"),a(".flying").resume(),this.$element.data("paused",0)},c.prototype.danmu_hideall=function(){a(".flying").css({opacity:0})},c.prototype.add_danmu=function(a){this.$element.data("danmu_array")[a.time]?this.$element.data("danmu_array")[a.time].push(a):(this.$element.data("danmu_array")[a.time]=new Array,this.$element.data("danmu_array")[a.time].push(a))},a.fn.danmu=b,a.fn.danmu.Constructor=c}(jQuery);